{% import "forms.html" as forms %}
{% extends theme("show.html") %}

{% set title = _("DESTROY COMPLETE ITEM '%(item_name)s'", item_name=fqname|shorten_fqname) %}

{% block content %}
    {% if rev_id == None %}
        <h1>{{ title }}</h1>
        {{ forms.list_subitems(alias_names, _("This item has alias names that will be destroyed:")) }}
        {{ forms.list_subitems(subitem_names, _("The following subitems will be destroyed:")) }}
        <div class="moin-form">
            {{ gen.form.open(form, method="post", action=url_for('frontend.destroy_item', item_name=fqname.fullname)) }}
                {{ forms.render_errors(form) }}
                <dl>
                    {{ forms.render(form['comment']) }}
                </dl>
                {{ forms.render_submit(form) }}
            {{ gen.form.close() }}
        </div>
    {% else %}
        <h1>{{ _("DESTROY REVISION '%(item_name)s' (rev %(rev_id)s)", item_name=fqname.value, rev_id=rev_id | shorten_id) }}</h1>
        <div class="moin-form">
            {{ gen.form.open(form, method="post", action=url_for('frontend.destroy_item', item_name=fqname.fullname, rev=rev_id)) }}
                {{ forms.render_errors(form) }}
                <dl>
                    {{ forms.render(form['comment']) }}
                </dl>
                {{ forms.render_submit(form) }}
            {{ gen.form.close() }}
        </div>
    {% endif %}
{% endblock %}
